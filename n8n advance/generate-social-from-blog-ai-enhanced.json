{
  "name": "generate-social-from-blog-ai-enhanced",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "new-blog-post",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-trigger",
      "name": "ğŸ“¥ Webhook: New Blog Post",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [100, 400],
      "webhookId": "blog-to-social-enhanced"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "â° Schedule: Check New Blogs",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [100, 600]
    },
    {
      "parameters": {
        "operation": "read",
        "sheetId": "{{ $env.GOOGLE_SHEET_ID }}",
        "range": "BlogQueue!A2:F",
        "options": {}
      },
      "id": "read-blog-queue",
      "name": "ğŸ“Š Read Blog Queue",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 3,
      "position": [300, 600],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "google_sheets_credential",
          "name": "Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.status }}",
              "operation": "equals",
              "value2": "pending"
            }
          ]
        }
      },
      "id": "filter-pending",
      "name": "ğŸ” Filter Pending Blogs",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [500, 600]
    },
    {
      "parameters": {
        "jsCode": "// Extract blog content from webhook or Google Sheets\nconst items = [];\n\nfor (const item of $input.all()) {\n  let blogData;\n  \n  // Check if data comes from webhook\n  if (item.json.body) {\n    blogData = {\n      title: item.json.body.title || '',\n      content: item.json.body.content || '',\n      image_url: item.json.body.image_url || '',\n      blog_url: item.json.body.blog_url || '',\n      language: item.json.body.language || 'tr',\n      rowId: null\n    };\n  } \n  // Data from Google Sheets\n  else {\n    blogData = {\n      title: item.json['Blog Title'] || item.json.title || '',\n      content: item.json['Blog Content'] || item.json.content || '',\n      image_url: item.json['Image URL'] || item.json.image_url || '',\n      blog_url: item.json['Blog URL'] || item.json.blog_url || '',\n      language: item.json['Language'] || item.json.language || 'tr',\n      rowId: item.json.row_number || null\n    };\n  }\n  \n  // Validate required fields\n  if (blogData.title && blogData.content) {\n    items.push({ json: blogData });\n  }\n}\n\nreturn items;"
      },
      "id": "extract-blog-content",
      "name": "âš™ï¸ Extract & Validate Blog Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [700, 500]
    },
    {
      "parameters": {
        "resource": "chat",
        "operation": "create",
        "modelId": "gpt-4",
        "options": {
          "temperature": 0.7,
          "maxTokens": 2000
        },
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "Sen yaratÄ±cÄ± bir sosyal medya iÃ§erik uzmanÄ±sÄ±n. Blog yazÄ±larÄ±ndan sosyal medya iÃ§erikleri oluÅŸturuyorsun.\n\nGÃ¶revin:\n1. LinkedIn iÃ§in profesyonel ve deÄŸer odaklÄ± bir post (250-300 kelime)\n2. Instagram iÃ§in ilgi Ã§ekici ve duygusal bir caption (150-200 kelime)\n3. Twitter/X iÃ§in kÄ±sa ve etkili bir tweet (280 karakter max)\n\nHer platform iÃ§in uygun ton ve stil kullan.\nEmoji kullanabilirsin ama abartma.\nCTA (Call-to-Action) ekle.\n\nCevabÄ±nÄ± ÅŸu JSON formatÄ±nda ver:\n{\n  \"linkedin\": \"LinkedIn post iÃ§eriÄŸi\",\n  \"instagram\": \"Instagram caption\",\n  \"twitter\": \"Twitter tweet\"\n}"
            },
            {
              "role": "user",
              "content": "Dil: {{ $json.language }}\n\nBlog BaÅŸlÄ±ÄŸÄ±: {{ $json.title }}\n\nBlog Ä°Ã§eriÄŸi:\n{{ $json.content }}\n\n{{ $json.blog_url ? 'Blog URL: ' + $json.blog_url : '' }}\n\nLÃ¼tfen bu blog yazÄ±sÄ±ndan sosyal medya iÃ§erikleri oluÅŸtur."
            }
          ]
        }
      },
      "id": "generate-social-content",
      "name": "ğŸ¤– AI: Generate Social Content",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1.3,
      "position": [900, 500],
      "credentials": {
        "openAiApi": {
          "id": "openai_credential",
          "name": "OpenAI API"
        }
      }
    },
    {
      "parameters": {
        "resource": "chat",
        "operation": "create",
        "modelId": "gpt-4",
        "options": {
          "temperature": 0.5,
          "maxTokens": 500
        },
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "Sen bir hashtag uzmanÄ±sÄ±n. Blog konusuna uygun, popÃ¼ler ve hedef kitleye ulaÅŸacak hashtagler oluÅŸturuyorsun.\n\nKurallar:\n- Her platform iÃ§in optimize edilmiÅŸ hashtagler\n- LinkedIn: 3-5 profesyonel hashtag\n- Instagram: 15-20 popÃ¼ler + niche hashtag\n- Twitter: 2-3 trending hashtag\n- TÃ¼rkÃ§e ve Ä°ngilizce karÄ±ÅŸÄ±k kullanabilirsin\n\nCevabÄ±nÄ± ÅŸu JSON formatÄ±nda ver:\n{\n  \"linkedin\": [\"#hashtag1\", \"#hashtag2\"],\n  \"instagram\": [\"#hashtag1\", \"#hashtag2\", ...],\n  \"twitter\": [\"#hashtag1\", \"#hashtag2\"]\n}"
            },
            {
              "role": "user",
              "content": "Blog BaÅŸlÄ±ÄŸÄ±: {{ $json.title }}\n\nKÄ±sa Ã–zet: {{ $json.content.substring(0, 300) }}...\n\nBu blog iÃ§in uygun hashtagler oluÅŸtur."
            }
          ]
        }
      },
      "id": "generate-hashtags",
      "name": "ğŸ·ï¸ AI: Generate Hashtags",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1.3,
      "position": [900, 700],
      "credentials": {
        "openAiApi": {
          "id": "openai_credential",
          "name": "OpenAI API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse AI responses and merge data\nconst items = [];\n\nfor (const item of $input.all()) {\n  try {\n    // Get social content from first AI call\n    const socialContentRaw = item.json.choices?.[0]?.message?.content || '{}';\n    const socialContent = JSON.parse(socialContentRaw);\n    \n    // Get hashtags from second AI call (from node connection)\n    const hashtagsNode = $node[\"generate-hashtags\"].json;\n    const hashtagsRaw = hashtagsNode?.choices?.[0]?.message?.content || '{\"linkedin\":[], \"instagram\":[], \"twitter\":[]}';\n    const hashtags = JSON.parse(hashtagsRaw);\n    \n    // Get original blog data\n    const originalData = $node[\"extract-blog-content\"].json;\n    \n    // Merge content with hashtags\n    const finalContent = {\n      linkedin: `${socialContent.linkedin}\\n\\n${hashtags.linkedin.join(' ')}${originalData.blog_url ? '\\n\\nğŸ”— ' + originalData.blog_url : ''}`,\n      instagram: `${socialContent.instagram}\\n\\n${hashtags.instagram.join(' ')}${originalData.blog_url ? '\\n\\nğŸ”— Link in bio!' : ''}`,\n      twitter: `${socialContent.twitter}\\n\\n${hashtags.twitter.join(' ')}${originalData.blog_url ? '\\n\\n' + originalData.blog_url : ''}`,\n      image_url: originalData.image_url || '',\n      blog_url: originalData.blog_url || '',\n      blog_title: originalData.title || '',\n      rowId: originalData.rowId || null\n    };\n    \n    items.push({ json: finalContent });\n  } catch (error) {\n    // Error handling\n    items.push({ \n      json: { \n        error: true, \n        message: error.message,\n        rawData: item.json \n      } \n    });\n  }\n}\n\nreturn items;"
      },
      "id": "merge-and-format",
      "name": "ğŸ”„ Merge Content & Hashtags",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1100, 600]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.error }}",
              "value2": true,
              "operation": "notEqual"
            }
          ]
        }
      },
      "id": "check-errors",
      "name": "â“ Check for Errors",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1300, 600]
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "text": "={{ $json.linkedin }}",
        "additionalFields": {
          "visibility": "PUBLIC"
        }
      },
      "id": "post-linkedin",
      "name": "ğŸ’¼ Post to LinkedIn",
      "type": "n8n-nodes-base.linkedIn",
      "typeVersion": 1,
      "position": [1500, 400],
      "credentials": {
        "linkedInOAuth2Api": {
          "id": "linkedin_credential",
          "name": "LinkedIn OAuth2"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "create",
        "caption": "={{ $json.instagram }}",
        "imageUrl": "={{ $json.image_url }}",
        "additionalFields": {}
      },
      "id": "post-instagram",
      "name": "ğŸ“¸ Post to Instagram",
      "type": "n8n-nodes-base.instagram",
      "typeVersion": 1,
      "position": [1500, 600],
      "credentials": {
        "instagramOAuth2Api": {
          "id": "instagram_credential",
          "name": "Instagram OAuth2"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "authentication": "oAuth1",
        "text": "={{ $json.twitter }}",
        "additionalFields": {}
      },
      "id": "post-twitter",
      "name": "ğŸ¦ Post to Twitter/X",
      "type": "n8n-nodes-base.twitter",
      "typeVersion": 2,
      "position": [1500, 800],
      "credentials": {
        "twitterOAuth1Api": {
          "id": "twitter_credential",
          "name": "Twitter OAuth1"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "operation": "append",
        "sheetId": "={{ $env.GOOGLE_SHEET_ID }}",
        "range": "PostLog!A:H",
        "options": {
          "valueInputMode": "USER_ENTERED"
        },
        "columns": {
          "mappings": [
            {
              "column": "Timestamp",
              "value": "={{ $now.toISO() }}"
            },
            {
              "column": "Blog Title",
              "value": "={{ $json.blog_title }}"
            },
            {
              "column": "Blog URL",
              "value": "={{ $json.blog_url }}"
            },
            {
              "column": "LinkedIn",
              "value": "={{ $node['post-linkedin'].json.success ? 'âœ… Success' : 'âŒ Failed' }}"
            },
            {
              "column": "Instagram",
              "value": "={{ $node['post-instagram'].json.success ? 'âœ… Success' : 'âŒ Failed' }}"
            },
            {
              "column": "Twitter",
              "value": "={{ $node['post-twitter'].json.success ? 'âœ… Success' : 'âŒ Failed' }}"
            },
            {
              "column": "Status",
              "value": "completed"
            },
            {
              "column": "Notes",
              "value": "Auto-posted successfully"
            }
          ]
        }
      },
      "id": "log-to-sheets",
      "name": "ğŸ“ Log to Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 3,
      "position": [1700, 600],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "google_sheets_credential",
          "name": "Google Sheets"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "operation": "update",
        "sheetId": "={{ $env.GOOGLE_SHEET_ID }}",
        "range": "BlogQueue!A{{ $json.rowId }}:F{{ $json.rowId }}",
        "options": {},
        "columns": {
          "mappings": [
            {
              "column": "Status",
              "value": "completed"
            },
            {
              "column": "Posted Date",
              "value": "={{ $now.toFormat('yyyy-MM-dd HH:mm:ss') }}"
            }
          ]
        }
      },
      "id": "update-queue-status",
      "name": "âœ… Update Queue Status",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 3,
      "position": [1700, 800],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "google_sheets_credential",
          "name": "Google Sheets"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "channel": "={{ $env.SLACK_CHANNEL }}",
        "text": "ğŸ‰ *Blog Sosyal Medyada PaylaÅŸÄ±ldÄ±!*\n\nğŸ“ *Blog:* {{ $json.blog_title }}\n\nâœ… *LinkedIn:* {{ $node['post-linkedin'].json.success ? 'BaÅŸarÄ±lÄ±' : 'BaÅŸarÄ±sÄ±z' }}\nâœ… *Instagram:* {{ $node['post-instagram'].json.success ? 'BaÅŸarÄ±lÄ±' : 'BaÅŸarÄ±sÄ±z' }}\nâœ… *Twitter:* {{ $node['post-twitter'].json.success ? 'BaÅŸarÄ±lÄ±' : 'BaÅŸarÄ±sÄ±z' }}\n\nğŸ”— {{ $json.blog_url }}",
        "otherOptions": {
          "username": "n8n Social Bot",
          "icon_emoji": ":rocket:"
        }
      },
      "id": "slack-success",
      "name": "ğŸ”” Slack: Success Notification",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [1900, 600],
      "credentials": {
        "slackApi": {
          "id": "slack_credential",
          "name": "Slack"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "channel": "={{ $env.SLACK_CHANNEL }}",
        "text": "âš ï¸ *Blog PaylaÅŸÄ±mÄ±nda Hata!*\n\nğŸ“ *Blog:* {{ $json.blog_title || 'Bilinmiyor' }}\n\nâŒ *Hata:* {{ $json.message || 'Bilinmeyen hata' }}\n\nğŸ”§ LÃ¼tfen workflow'u kontrol edin.",
        "otherOptions": {
          "username": "n8n Social Bot",
          "icon_emoji": ":warning:"
        }
      },
      "id": "slack-error",
      "name": "ğŸš¨ Slack: Error Notification",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [1500, 1000],
      "credentials": {
        "slackApi": {
          "id": "slack_credential",
          "name": "Slack"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { success: true, message: 'Blog successfully queued for social media posting', blog_title: $json.blog_title } }}"
      },
      "id": "webhook-response-success",
      "name": "âœ… Webhook Response: Success",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [2100, 600]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseCode": 500,
        "responseBody": "={{ { success: false, message: 'Error processing blog', error: $json.message } }}"
      },
      "id": "webhook-response-error",
      "name": "âŒ Webhook Response: Error",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1700, 1000]
    }
  ],
  "connections": {
    "ğŸ“¥ Webhook: New Blog Post": {
      "main": [
        [
          {
            "node": "âš™ï¸ Extract & Validate Blog Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "â° Schedule: Check New Blogs": {
      "main": [
        [
          {
            "node": "ğŸ“Š Read Blog Queue",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“Š Read Blog Queue": {
      "main": [
        [
          {
            "node": "ğŸ” Filter Pending Blogs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” Filter Pending Blogs": {
      "main": [
        [
          {
            "node": "âš™ï¸ Extract & Validate Blog Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš™ï¸ Extract & Validate Blog Data": {
      "main": [
        [
          {
            "node": "ğŸ¤– AI: Generate Social Content",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ·ï¸ AI: Generate Hashtags",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ¤– AI: Generate Social Content": {
      "main": [
        [
          {
            "node": "ğŸ”„ Merge Content & Hashtags",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ·ï¸ AI: Generate Hashtags": {
      "main": [
        [
          {
            "node": "ğŸ”„ Merge Content & Hashtags",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”„ Merge Content & Hashtags": {
      "main": [
        [
          {
            "node": "â“ Check for Errors",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "â“ Check for Errors": {
      "main": [
        [
          {
            "node": "ğŸ’¼ Post to LinkedIn",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ“¸ Post to Instagram",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ¦ Post to Twitter/X",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸš¨ Slack: Error Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ’¼ Post to LinkedIn": {
      "main": [
        [
          {
            "node": "ğŸ“ Log to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“¸ Post to Instagram": {
      "main": [
        [
          {
            "node": "ğŸ“ Log to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ¦ Post to Twitter/X": {
      "main": [
        [
          {
            "node": "ğŸ“ Log to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ Log to Google Sheets": {
      "main": [
        [
          {
            "node": "âœ… Update Queue Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âœ… Update Queue Status": {
      "main": [
        [
          {
            "node": "ğŸ”” Slack: Success Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”” Slack: Success Notification": {
      "main": [
        [
          {
            "node": "âœ… Webhook Response: Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸš¨ Slack: Error Notification": {
      "main": [
        [
          {
            "node": "âŒ Webhook Response: Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": ""
  },
  "staticData": null,
  "tags": [
    {
      "name": "Marketing",
      "id": "marketing"
    },
    {
      "name": "Social Media",
      "id": "social-media"
    },
    {
      "name": "AI-Powered",
      "id": "ai"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-12-02T00:00:00.000Z",
  "versionId": "1.0.0",
  "active": false
}
